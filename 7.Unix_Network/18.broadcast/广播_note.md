一、广播的用途
1. 资源发现：在本地子网定位一个服务器主机，前提是已知或认定这个服务器主机位于本地子网，但是不知道它的单播IP地址
2. 减少网络分组流通：在有多个客户主机与单个服务器主机通信的局域网环境中尽量减少分组流通

注意：
(1). IPv4对多播的支持是可选的，IPv6是必须的
(2). IPv6没有提供对广播的支持，当使用广播的IPv4应用程序移植到IPv6时，必须使用IPv6的多播方式重新编码
(3). 广播和多播要使用UDP，二者都不能使用TCP
(4). 发送方只有一个接收方则称单播; 如果同时发给局域网中的所有主机,成为广播
(5). 广播地址
    a.以192.168.1.0(255.255.255.0)网段为例,最大的主机地址192.168.1.255代表该网段的广播地址
    b.发送到该地址的数据包将被所有主机接收
    c.255.255.255.255在所有网段中都代表广播地址


二、使用广播的例子
1. ARP（地址解析协议）
ARP并不是一个用户应用，而是IPv4的基本组成部分之一。ARP在本地子网上广播一个请求说“IP地址为xx.xx.xx.xx的系统亮明身份，告诉我你的硬件地址”。ARP使用链路层广播而不是IP层广播

2. DHCP（动态主机配置协议）
在认定本地子网上有一个DHCP服务器主机或中继主机的前提下，DHCP客户主机向广播地址（通常是255.255.255.255，因为客户还不知道自己的IP地址、子网掩码以及本子网的受限广播地址）发送自己的请求

3.NTP（网络时间协议）
NTP的一种常见使用情形是客户主机配置上待使用的一个或多个服务器主机的IP地址，然后以某个频度（每隔64秒钟或更长时间一次）轮询这些服务器主机。根据由服务器返送的当前时间和到达服务器主机的RTT，客户使用精妙的算法更新本地时钟。然而在一个广播局域网上，服务器主机却可以为本地子网上的所有客户主机每隔64秒钟广播一次当前时间，免得每个客户主机各自轮询这个服务器主机，从而减少网络分组流通量

4. routed路由守护进程
routed是最早实现且最常用的路由守护进程之一，它在一个局域网上广播自己的路由表。这么一来连接到该局域网上的所有其他路由器都可以接收这些路由通告，而无须事先为每个路由器配置其邻居路由器的IP地址。这个特性也能被该局域网上的主机用于监听这些路由通告，并相应地更新各自的路由表

三、广播代码

1. 广播发送步骤

(1). 创建用户数据报套接字
(2). 缺省创建的套接字不允许广播数据包,需要设置属性setsockopt
`
int is_use_brc = 1;
setsockopt(fd, SOL_SOCKET, SO_BROADCAST, &is_use_brc, sizeof(is_use_brc));
`
(3). 接收方地址指定为广播地址
(4). 指定端口信息
(5). 发送数据包

2.广播接收步骤

(1). 创建用户数据报套接字
(2). 绑定本机IP地址和端口(绑定的端口必须与发送方指定的端口相同)
(3). 等待接收数据

